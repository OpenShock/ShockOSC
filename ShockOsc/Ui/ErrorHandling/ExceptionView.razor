@using System.Diagnostics

<MudContainer Class="align-content-center" MaxWidth="MaxWidth.Medium" Style="padding-top: 30px">
    <MudPaper Class="rounded-lg" Elevation="0" Style="padding: 40px 20px; text-align: center;" Outlined="true">
        <MudText Typo="Typo.h3">An unknown error occurred</MudText>
        <br/>
        <MudText Typo="Typo.h6">Please report this to us on GitHub</MudText>

        <CodeBlock Value="@Exception.ToString()"></CodeBlock>
        <br/>

        <MudButton IconClass="@Icons.Material.Filled.Link" OnClick="OpenGithub" Variant="Variant.Filled"
                   Color="Color.Primary">
            Open Github
        </MudButton>
        <MudButton OnClick="() => OnResume.InvokeAsync()" Variant="Variant.Filled" Color="Color.Primary">
            Resume
        </MudButton>

    </MudPaper>
</MudContainer>

@code {

    /// <summary>
    /// Resume button click event
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnResume { get; set; }

    /// <summary>
    /// Exception to display
    /// </summary>
    [Parameter]
    public required Exception Exception { get; set; }

    private void OpenGithub()
    {
        Process.Start(new ProcessStartInfo("https://github.com/OpenShock/ShockOsc/issues/new/choose") { UseShellExecute = true });
    }
}